# üè™ Proyecto Multitenant SaaS de Ventas Web

## 1Ô∏è‚É£ Resumen del proyecto

Este proyecto es una **plataforma web multitenant tipo SaaS** orientada a la venta de productos. Cada tenant (cliente) tendr√° su propio cat√°logo, categor√≠as, configuraciones, y un administrador.  
La web es **solo visualizaci√≥n para visitantes** (sin login), mientras que los administradores podr√°n gestionar productos, categor√≠as y configuraci√≥n de su tenant desde un dashboard seguro.

### Stack tecnol√≥gico:
- **Frontend**: Next.js 14+ (App Router / Pages Router) + Tailwind CSS.
- **Backend**: Next.js API Routes + Prisma ORM.
- **Base de datos**: PostgreSQL (Supabase o Railway recomendado).
- **Almacenamiento de im√°genes**: Cloudinary o Supabase Storage (CDN).
- **Deployment**: Vercel (gratis hasta cierto l√≠mite, con escalabilidad y SSL autom√°tico).

---

## 2Ô∏è‚É£ Concepto Multitenant

- Cada **tenant** representa un negocio/cliente.
- **Roles**:
  - **Administrador general**: usuario superadmin, puede crear/desactivar tenants.
  - **Administrador del tenant**: gestiona productos, categor√≠as y configuraci√≥n de su tenant.
- Los visitantes pueden acceder **solo para ver productos y categor√≠as**, sin login.
- Cada tenant tiene:
  - Configuraci√≥n propia: logo, colores, descripciones.
  - Productos: nombre, precio, imagen, categor√≠a.
  - Categor√≠as: activar/desactivar, organizar productos.

---

## 3Ô∏è‚É£ Estructura de la base de datos (Prisma)

```prisma
model Tenant {
  id          Int       @id @default(autoincrement())
  name        String
  logoUrl     String?
  theme       String
  description String?
  products    Product[]
  categories  Category[]
  admins      User[]    // administradores del tenant
}

model Category {
  id        Int      @id @default(autoincrement())
  tenantId  Int
  name      String
  active    Boolean  @default(true)
  tenant    Tenant   @relation(fields: [tenantId], references: [id])
  products  Product[]
}

model Product {
  id          Int      @id @default(autoincrement())
  tenantId    Int
  categoryId  Int
  name        String
  price       Float
  imageUrl    String
  tenant      Tenant   @relation(fields: [tenantId], references: [id])
  category    Category @relation(fields: [categoryId], references: [id])
}

model User {
  id        Int      @id @default(autoincrement())
  tenantId  Int?
  email     String   @unique
  role      String   // 'general_admin' o 'tenant_admin'
  tenant    Tenant?  @relation(fields: [tenantId], references: [id])
}
4Ô∏è‚É£ Clases y organizaci√≥n de c√≥digo en Next.js
App Routes / API Routes

/api/tenants ‚Üí CRUD de tenants (solo superadmin).

/api/products ‚Üí CRUD de productos por tenant.

/api/categories ‚Üí CRUD de categor√≠as por tenant.

/api/users ‚Üí CRUD de administradores por tenant.

Frontend / Pages

[tenant]/index.js ‚Üí P√°gina principal del tenant, muestra cat√°logo y descripci√≥n.

[tenant]/productos.js ‚Üí Lista de productos filtrados por categor√≠a.

[tenant]/categorias.js ‚Üí Lista de categor√≠as activas.

[tenant]/about.js ‚Üí Informaci√≥n sobre la empresa del tenant.

[tenant]/admin ‚Üí Dashboard para administrador del tenant (seguro).

Componentes

Header ‚Üí Logo, navegaci√≥n y tema.

ProductCard ‚Üí Imagen, nombre, precio.

CategoryFilter ‚Üí Filtro din√°mico de categor√≠as.

ThemeProvider ‚Üí Aplica colores y estilos seg√∫n tenant.

AdminPanel ‚Üí Administraci√≥n de productos y categor√≠as (solo admin).

Utils

api.js ‚Üí Funciones de consulta a API Routes.

tenantUtils.js ‚Üí Carga de configuraci√≥n y tema por tenant.

auth.js ‚Üí Control de roles y permisos para admins (solo backend).

5Ô∏è‚É£ Flujo de funcionamiento

El visitante entra a https://tenant1.mi-saas.com.

Next.js carga configuraci√≥n del tenant: logo, tema, descripci√≥n.

Se muestran categor√≠as activas y productos filtrados por tenant y categor√≠a.

Los visitantes solo pueden ver los productos, no hay login.

Los administradores acceden a /[tenant]/admin para:

Crear, editar y eliminar productos.

Activar/desactivar categor√≠as.

Cambiar tema, logo y descripci√≥n.

Todas las consultas se filtran por tenantId.